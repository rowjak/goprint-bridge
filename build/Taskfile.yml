version: '3'

tasks:
  go:mod:tidy:
    summary: Runs `go mod tidy`
    internal: true
    cmds:
      - go mod tidy

  install:frontend:deps:
    summary: Install frontend dependencies
    dir: frontend
    sources:
      - package.json
      - package-lock.json
    generates:
      - node_modules/*
    cmds:
      - npm install

  build:frontend:
    summary: Build the frontend project
    dir: frontend
    deps:
      - task: install:frontend:deps
    cmds:
      - npm run build

  generate:bindings:
    summary: Generates bindings for the frontend
    cmds:
      - wails3 generate bindings -d frontend/wailsjs

  dev:frontend:
    summary: Runs the frontend in development mode
    dir: frontend
    deps:
      - task: install:frontend:deps
    cmds:
      - npm run dev
